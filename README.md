# Background
In every business, including e-commerce, customer behavior differs from person to person. But there are always some similar characteristics between a group of customers and also some differentiating characteristics<sup>[1]</sup>. We can leverage these differences and similarities to separate the customers into a couple of groups, and then use those groups’ characteristics to further understand the customers. Using this knowledge, the business can learn about the shopping behavior of different kinds of customers and develop different products for each customer group. This process is known as customer segmentation. When we understand the customers characteristics, we can analyze the relationships between customers and the e-commerce business itself, and it can provide the company with information about what the customers are expecting. By acting on the results of these analyses, the company can increase customer engagement by enhancing customer satisfaction and loyalty<sup>[2]</sup>. This will also lead to better customer relationship management (CRM) and improved CRM can lead to improved customer acquisition, customer retention, and customer profitability<sup>[3]</sup>. Some other potential benefits of CRM are as follows: (1) Increased customer retention and loyalty, (2) Higher customer profitability, (3) Creation value for the customer, (4) Customization of products and services, and (5) Lower process, higher quality products and services<sup>[7]</sup>.

# Problem Identification
## 1. Problem Definition
According to Chen et.al. <sup>[5]</sup>, one of the main business concerns of online retailers are finding out what are customers’ purchase behavior patterns and who are the most valuable customers to the business and what are their distinct characteristics.
The problem is that from the data that we have, we can only define characteristics of the whole Olist customers. We cannot know if there are any different segments of the customers, and the defining characteristics of each group. By understanding the customer segments, the company can better understand the customers’ behavior and act on these knowledge accordingly.

## 2. Business Objectives
Based on the available dataset, we found that the business objective that we can use for the development of olist e-commerce is to find out the habits of each customer segment. The customer segmentation that will be generated by this project will later be able to help the olist to implement marketing strategies for each segment.
The expectation in this machine learning project is to create an algorithm that can later help accurate customer grouping so that it can help olist know the characteristics of olist users.
The main goal of this project is to help meet the expectations of the algorithm to be created for the grouping of each user segment through the following objectives:

- Group customers based on their behavior so that they are divided into several segments.
- Find out the defining characteristics in each customer segment.

With these two objectives, it can help the Olist business team in finding marketing strategies based on the type or characteristics of each cluster that is formed.


## 3. Data Requirements
We want to predict the customer segments and find out the defining characteristics of each group, so we need to have information about said customer characteristics (e.g., average product price, product size, customer purchase dates, customer join date, etc.) to make the prediction.

## 4. Analytic Approach
### a. Machine Learning Techniques
Since in customer segmentation, we do not yet know which customers can be grouped into which categories (there is no label), this problem cannot be addressed using Supervised Learning. For this problem, we are using Unsupervised Learning approach, more specifically Clustering. Clustering can be used as a tool to present data distribution, observe cluster’s characteristics, and make further analysis of specific clusters if needed<sup>[1]</sup>. We will train a clustering model using the data from the dataset, determine the optimum number of clusters for this data, then retrain the model using the optimum number of clusters. From the retrained model, we can predict each customer will be grouped into which cluster, then we can find the average characteristics of each group to be analyzed.

### b. Risk
Because customer segmentation is usually used to do targeted marketing, the risk of falsely predicting the customer groups are:
- Marketing budget loss

This is when the marketing team have done any targeted marketing, such as targeted ads, targeted promotions, but it turns out that the customers they are targeting are the wrong ones, then the money spent on marketing is lost.
- Future business income loss.

When we are doing targeted marketing, the hope is that we can increase sales. When we do wrong targeted marketing, then that future increase in sales is lost.

### Performance Measure
The performance measures used to evaluate the ML model are inertia and silhouette score.

## 5. Action
The business user can use the prediction result to further understand the customers, and to do better marketing or promotions to the customers so that they can increase income.

## 6. Value
This project will save some marketing costs because now the business user is able to do marketing to only certain groups of customers that have the highest chance of buying the products, rather than marketing to all customers that may not be interested in the product at all. This can also increase customer engagement rate because each customer can feel the personalization from the business.


# Data Understanding and Data Preparation
We started by importing the dataset which contains 9 tables. Then we analyzed each table, created new features where needed, and converted the formats of some features to a more usable format. After that we merged some of the tables into one analytics base table (ABT) and grouped the data to customer level instead of order level which is provided by the dataset source. This table is then used for EDA, handling missing data points, and choosing relevant features to be used for modelling.
We are generating some new features, including RFM, which stands for Recency, Frequency, and Monetary value. Recency is the interval of time between the latest customer purchase and the present, frequency refers to the customers’ buying frequency in a time period, and monetary value represents the customers’ consumption of money in that period of time. According to Wu and Lin<sup>[1]</sup>, RFM method is very effective for customer segmentation. 

# Modeling
We are using K-Means Clustering for the model because this is one of the most well-known models for clustering, and it is also relatively low-cost in regards to computational power. K-means clustering is one of the clustering algorithms based on division<sup>[6]</sup>.
In the modeling phase, we started by training the model using various numbers of clusters and evaluating their performance. After evaluation, we then determined the optimum number of clusters and retrain the model using that value. This is the model that we are using to predict the clusters for each datapoint.

# Evaluation
We are using 4 clusters in this project because this number of clusters gives us the best inertia as well as silhouette score. Increasing the number of clusters will not decrease the inertia score that significantly, while it will decrease the silhouette score dramatically. Using 4 clusters, we are able to get an inertia score of 1,244,650 and silhouette score of 0.77.



# References
1. Wu, Jing, and Zheng Lin. “Research on Customer Segmentation Model by Clustering.” Proceedings of the 7th International Conference on Electronic Commerce  - ICEC '05, 15 Aug. 2005, pp. 316–318., https://doi.org/10.1145/1089551.1089610. 
2. Wu, Roung-Shiunn, and Po-Hsuan Chou. “Customer Segmentation of Multiple Category Data in e-Commerce Using a Soft-Clustering Approach.” Electronic Commerce Research and Applications, vol. 10, no. 3, 2011, pp. 331–341., https://doi.org/10.1016/j.elerap.2010.11.002.
3. Khajvand, Mahboubeh, et al. “Estimating Customer Lifetime Value Based on RFM Analysis of Customer Purchase Behavior: Case Study.” Procedia Computer Science, vol. 3, 22 Feb. 2011, pp. 57–63., https://doi.org/10.1016/j.procs.2010.12.011.
4. Christy, A. Joy, et al. “RFM Ranking – an Effective Approach to Customer Segmentation.” Journal of King Saud University - Computer and Information Sciences, vol. 33, no. 10, Dec. 2021, pp. 1251–1257., https://doi.org/10.1016/j.jksuci.2018.09.004.
5. Chen, Daqing, et al. “Data Mining for the Online Retail Industry: A Case Study of RFM Model-Based Customer Segmentation Using Data Mining.” Journal of Database Marketing &amp; Customer Strategy Management, vol. 19, no. 3, 27 Aug. 2012, pp. 197–208., https://doi.org/10.1057/dbm.2012.17.
6. Monil, Patel, et al. “Customer Segmentation Using Machine Learning.” International Journal for Research in Applied Science and Engineering Technology, vol. 8, no. 6, 30 June 2020, pp. 2104–2108., https://doi.org/10.22214/ijraset.2020.6344.
7. Kim, Su-Yeon, et al. “Customer Segmentation and Strategy Development Based on Customer Lifetime Value: A Case Study.” Expert Systems with Applications, vol. 31, no. 1, July 2006, pp. 101–107., https://doi.org/10.1016/j.eswa.2005.09.004.
